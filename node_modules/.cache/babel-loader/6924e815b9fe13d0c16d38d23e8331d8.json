{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = sortFields;\n\nvar _has = _interopRequireDefault(require(\"lodash/has\"));\n\nvar _toposort = _interopRequireDefault(require(\"toposort\"));\n\nvar _propertyExpr = require(\"property-expr\");\n\nvar _Reference = _interopRequireDefault(require(\"../Reference\"));\n\nvar _isSchema = _interopRequireDefault(require(\"./isSchema\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n} // @ts-expect-error\n\n\nfunction sortFields(fields) {\n  let excludedEdges = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  let edges = [];\n  let nodes = new Set();\n  let excludes = new Set(excludedEdges.map(_ref => {\n    let [a, b] = _ref;\n    return `${a}-${b}`;\n  }));\n\n  function addNode(depPath, key) {\n    let node = (0, _propertyExpr.split)(depPath)[0];\n    nodes.add(node);\n    if (!excludes.has(`${key}-${node}`)) edges.push([key, node]);\n  }\n\n  for (const key in fields) if ((0, _has.default)(fields, key)) {\n    let value = fields[key];\n    nodes.add(key);\n    if (_Reference.default.isRef(value) && value.isSibling) addNode(value.path, key);else if ((0, _isSchema.default)(value) && 'deps' in value) value.deps.forEach(path => addNode(path, key));\n  }\n\n  return _toposort.default.array(Array.from(nodes), edges).reverse();\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","default","sortFields","_has","_interopRequireDefault","require","_toposort","_propertyExpr","_Reference","_isSchema","obj","__esModule","fields","excludedEdges","edges","nodes","Set","excludes","map","a","b","addNode","depPath","key","node","split","add","has","push","isRef","isSibling","path","deps","forEach","array","Array","from","reverse"],"sources":["/home/fusion/workspace/frontend/node_modules/yup/lib/util/sortFields.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = sortFields;\n\nvar _has = _interopRequireDefault(require(\"lodash/has\"));\n\nvar _toposort = _interopRequireDefault(require(\"toposort\"));\n\nvar _propertyExpr = require(\"property-expr\");\n\nvar _Reference = _interopRequireDefault(require(\"../Reference\"));\n\nvar _isSchema = _interopRequireDefault(require(\"./isSchema\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// @ts-expect-error\nfunction sortFields(fields, excludedEdges = []) {\n  let edges = [];\n  let nodes = new Set();\n  let excludes = new Set(excludedEdges.map(([a, b]) => `${a}-${b}`));\n\n  function addNode(depPath, key) {\n    let node = (0, _propertyExpr.split)(depPath)[0];\n    nodes.add(node);\n    if (!excludes.has(`${key}-${node}`)) edges.push([key, node]);\n  }\n\n  for (const key in fields) if ((0, _has.default)(fields, key)) {\n    let value = fields[key];\n    nodes.add(key);\n    if (_Reference.default.isRef(value) && value.isSibling) addNode(value.path, key);else if ((0, _isSchema.default)(value) && 'deps' in value) value.deps.forEach(path => addNode(path, key));\n  }\n\n  return _toposort.default.array(Array.from(nodes), edges).reverse();\n}"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAC3CC,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkBC,UAAlB;;AAEA,IAAIC,IAAI,GAAGC,sBAAsB,CAACC,OAAO,CAAC,YAAD,CAAR,CAAjC;;AAEA,IAAIC,SAAS,GAAGF,sBAAsB,CAACC,OAAO,CAAC,UAAD,CAAR,CAAtC;;AAEA,IAAIE,aAAa,GAAGF,OAAO,CAAC,eAAD,CAA3B;;AAEA,IAAIG,UAAU,GAAGJ,sBAAsB,CAACC,OAAO,CAAC,cAAD,CAAR,CAAvC;;AAEA,IAAII,SAAS,GAAGL,sBAAsB,CAACC,OAAO,CAAC,YAAD,CAAR,CAAtC;;AAEA,SAASD,sBAAT,CAAgCM,GAAhC,EAAqC;EAAE,OAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;IAAET,OAAO,EAAES;EAAX,CAArC;AAAwD,C,CAE/F;;;AACA,SAASR,UAAT,CAAoBU,MAApB,EAAgD;EAAA,IAApBC,aAAoB,uEAAJ,EAAI;EAC9C,IAAIC,KAAK,GAAG,EAAZ;EACA,IAAIC,KAAK,GAAG,IAAIC,GAAJ,EAAZ;EACA,IAAIC,QAAQ,GAAG,IAAID,GAAJ,CAAQH,aAAa,CAACK,GAAd,CAAkB;IAAA,IAAC,CAACC,CAAD,EAAIC,CAAJ,CAAD;IAAA,OAAa,GAAED,CAAE,IAAGC,CAAE,EAAtB;EAAA,CAAlB,CAAR,CAAf;;EAEA,SAASC,OAAT,CAAiBC,OAAjB,EAA0BC,GAA1B,EAA+B;IAC7B,IAAIC,IAAI,GAAG,CAAC,GAAGjB,aAAa,CAACkB,KAAlB,EAAyBH,OAAzB,EAAkC,CAAlC,CAAX;IACAP,KAAK,CAACW,GAAN,CAAUF,IAAV;IACA,IAAI,CAACP,QAAQ,CAACU,GAAT,CAAc,GAAEJ,GAAI,IAAGC,IAAK,EAA5B,CAAL,EAAqCV,KAAK,CAACc,IAAN,CAAW,CAACL,GAAD,EAAMC,IAAN,CAAX;EACtC;;EAED,KAAK,MAAMD,GAAX,IAAkBX,MAAlB,EAA0B,IAAI,CAAC,GAAGT,IAAI,CAACF,OAAT,EAAkBW,MAAlB,EAA0BW,GAA1B,CAAJ,EAAoC;IAC5D,IAAIvB,KAAK,GAAGY,MAAM,CAACW,GAAD,CAAlB;IACAR,KAAK,CAACW,GAAN,CAAUH,GAAV;IACA,IAAIf,UAAU,CAACP,OAAX,CAAmB4B,KAAnB,CAAyB7B,KAAzB,KAAmCA,KAAK,CAAC8B,SAA7C,EAAwDT,OAAO,CAACrB,KAAK,CAAC+B,IAAP,EAAaR,GAAb,CAAP,CAAxD,KAAsF,IAAI,CAAC,GAAGd,SAAS,CAACR,OAAd,EAAuBD,KAAvB,KAAiC,UAAUA,KAA/C,EAAsDA,KAAK,CAACgC,IAAN,CAAWC,OAAX,CAAmBF,IAAI,IAAIV,OAAO,CAACU,IAAD,EAAOR,GAAP,CAAlC;EAC7I;;EAED,OAAOjB,SAAS,CAACL,OAAV,CAAkBiC,KAAlB,CAAwBC,KAAK,CAACC,IAAN,CAAWrB,KAAX,CAAxB,EAA2CD,KAA3C,EAAkDuB,OAAlD,EAAP;AACD"},"metadata":{},"sourceType":"script"}